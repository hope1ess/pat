```c++
#include <iostream>
#include <algorithm>
#include <string>
#include <vector>
using namespace std;
struct node
{
	int weight;
	vector<int> children;
}Node[110];

int weight[110];
int N, M, S;
vector<string> result;

bool cmp(int a, int b)
{
	return weight[a] > weight[b];
}

void DFS(int index, int sum, string s)
{
	if (sum > S)
		return;
	if (sum == S)
	{
		if (Node[index].children.size() != 0)
			return;
		result.push_back(s.substr(0, s.length() - 1));
		return;
	}
	for (int i = 0; i < Node[index].children.size(); ++i)
	{
		int temp_id = Node[index].children[i];
		string temp_s = s + to_string(weight[temp_id]) + " ";
		DFS(temp_id, sum + weight[temp_id], temp_s);
	}
}

int main()
{
	cin >> N >> M >> S;
	for (int i = 0; i < N; ++i)
		cin >> weight[i];
	for (int i = 0; i < M; ++i)
	{
		int id, count;
		cin >> id >> count;
		for (int j = 0; j < count; ++j)
		{
			int child;
			cin >> child;
			Node[id].children.push_back(child);
		}
		sort(Node[id].children.begin(), Node[id].children.end(), cmp);
	}
	DFS(0, weight[0], to_string(weight[0]) + " ");
	for (auto s : result)
		cout << s << endl;
	system("pause");
	return 0;
}
```